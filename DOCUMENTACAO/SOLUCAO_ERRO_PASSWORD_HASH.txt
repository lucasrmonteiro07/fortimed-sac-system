✅ SOLUÇÃO DO ERRO - PASSWORD_HASH
═════════════════════════════════════════════════════════════════════════════════

❌ ERRO RECEBIDO:
─────────────────
"null value in column password_hash violates not-null constraint"

📝 SIGNIFICADO:
───────────────
O campo password_hash é obrigatório e não pode ser vazio.
Precisa de um hash criptografado da senha.

═════════════════════════════════════════════════════════════════════════════════

🚀 SOLUÇÃO (EXECUTE ISTO AGORA)
═════════════════════════════════════════════════════════════════════════════════

Copie e execute NO SUPABASE SQL EDITOR:


INSERT INTO public.users (
    id,
    email,
    password_hash,
    name,
    role,
    created_at,
    updated_at
) VALUES (
    '2e6d9014-8fdf-4e5a-b41f-ac7e2c2ea53f',
    'anapaula@fortimeddistribuidora.com.br',
    crypt('Compras@01', gen_salt('bf')),
    'Ana Paula',
    'admin',
    NOW(),
    NOW()
);


RESUMO DO QUE FAZ:
─────────────────
✅ Insere usuário com ID correto
✅ Define email
✅ Gera hash criptografado da senha (Compras@01)
✅ Define nome
✅ Define role como 'admin'
✅ Registra timestamps


PASSO A PASSO:
──────────────
1. Acesse: https://app.supabase.com/
2. SQL Editor > New Query
3. Delete qualquer SQL anterior
4. Cole o SQL acima (EXATAMENTE como está)
5. Clique: "Run"
6. Aguarde: 2-3 segundos
7. Resultado: "SUCCESS: 1 row(s) inserted"
8. Pronto! ✅


DEPOIS, TESTE:
───────────────
1. Acesse: http://seu-servidor/login.html
2. Email: anapaula@fortimeddistribuidora.com.br
3. Senha: Compras@01
4. Clique: "Entrar"
5. Esperado: Login bem-sucedido e vê 👑 Ana Paula (Admin)


═════════════════════════════════════════════════════════════════════════════════

ℹ️ O que é crypt() e gen_salt()?
─────────────────────────────────
• crypt() = Função que criptografa a senha
• gen_salt('bf') = Gera um salt aleatório com algoritmo bcrypt
• Resultado = Senha segura, armazenada no banco de forma irreversível
• A mesma senha sempre gera um hash diferente (é normal!)


SE TIVER ERRO NOVAMENTE:
────────────────────────
Apague e tente executar apenas isto (forma mais simples):

DELETE FROM public.users WHERE email = 'anapaula@fortimeddistribuidora.com.br';

INSERT INTO public.users (id, email, password_hash, name, role) VALUES
('2e6d9014-8fdf-4e5a-b41f-ac7e2c2ea53f', 
 'anapaula@fortimeddistribuidora.com.br',
 crypt('Compras@01', gen_salt('bf')),
 'Ana Paula',
 'admin');


═════════════════════════════════════════════════════════════════════════════════

Arquivo com script completo: SQL/correcao-anapaula-admin.sql

═════════════════════════════════════════════════════════════════════════════════
