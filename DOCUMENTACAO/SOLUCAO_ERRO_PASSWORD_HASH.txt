âœ… SOLUÃ‡ÃƒO DO ERRO - PASSWORD_HASH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ ERRO RECEBIDO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"null value in column password_hash violates not-null constraint"

ğŸ“ SIGNIFICADO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
O campo password_hash Ã© obrigatÃ³rio e nÃ£o pode ser vazio.
Precisa de um hash criptografado da senha.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ SOLUÃ‡ÃƒO (EXECUTE ISTO AGORA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Copie e execute NO SUPABASE SQL EDITOR:


INSERT INTO public.users (
    id,
    email,
    password_hash,
    name,
    role,
    created_at,
    updated_at
) VALUES (
    '2e6d9014-8fdf-4e5a-b41f-ac7e2c2ea53f',
    'anapaula@fortimeddistribuidora.com.br',
    crypt('Compras@01', gen_salt('bf')),
    'Ana Paula',
    'admin',
    NOW(),
    NOW()
);


RESUMO DO QUE FAZ:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Insere usuÃ¡rio com ID correto
âœ… Define email
âœ… Gera hash criptografado da senha (Compras@01)
âœ… Define nome
âœ… Define role como 'admin'
âœ… Registra timestamps


PASSO A PASSO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Acesse: https://app.supabase.com/
2. SQL Editor > New Query
3. Delete qualquer SQL anterior
4. Cole o SQL acima (EXATAMENTE como estÃ¡)
5. Clique: "Run"
6. Aguarde: 2-3 segundos
7. Resultado: "SUCCESS: 1 row(s) inserted"
8. Pronto! âœ…


DEPOIS, TESTE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Acesse: http://seu-servidor/login.html
2. Email: anapaula@fortimeddistribuidora.com.br
3. Senha: Compras@01
4. Clique: "Entrar"
5. Esperado: Login bem-sucedido e vÃª ğŸ‘‘ Ana Paula (Admin)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â„¹ï¸ O que Ã© crypt() e gen_salt()?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ crypt() = FunÃ§Ã£o que criptografa a senha
â€¢ gen_salt('bf') = Gera um salt aleatÃ³rio com algoritmo bcrypt
â€¢ Resultado = Senha segura, armazenada no banco de forma irreversÃ­vel
â€¢ A mesma senha sempre gera um hash diferente (Ã© normal!)


SE TIVER ERRO NOVAMENTE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Apague e tente executar apenas isto (forma mais simples):

DELETE FROM public.users WHERE email = 'anapaula@fortimeddistribuidora.com.br';

INSERT INTO public.users (id, email, password_hash, name, role) VALUES
('2e6d9014-8fdf-4e5a-b41f-ac7e2c2ea53f', 
 'anapaula@fortimeddistribuidora.com.br',
 crypt('Compras@01', gen_salt('bf')),
 'Ana Paula',
 'admin');


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Arquivo com script completo: SQL/correcao-anapaula-admin.sql

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
